(function(){"use strict";var e={260:function(e,t,s){var o=s(9242),n=s(3396);const r={key:0};function a(e,t,s,o,a,i){const l=(0,n.up)("login-chat-app"),u=(0,n.up)("chat-app");return(0,n.wg)(),(0,n.iD)(n.HY,null,[0===a.page?((0,n.wg)(),(0,n.iD)("h1",r,"chocket.io")):(0,n.kq)("",!0),0===a.page?((0,n.wg)(),(0,n.j4)(l,{key:1,rooms:a.rooms,"room-selected":a.roomSelected,onChangePage:t[0]||(t[0]=e=>i.changePage(e))},null,8,["rooms","room-selected"])):(0,n.kq)("",!0),1===a.page?((0,n.wg)(),(0,n.j4)(u,{key:2,rooms:a.rooms,username:a.username,"room-selected":a.roomSelected,onSwitchRoom:t[1]||(t[1]=e=>a.roomSelected=e)},null,8,["rooms","username","room-selected"])):(0,n.kq)("",!0)],64)}var i=s(7139);const l=e=>((0,n.dD)("data-v-faa874d6"),e=e(),(0,n.Cn)(),e),u={class:"chocket"},c={class:"room-list"},m=["onClick"],d={class:"chat"},g={class:"chat-wrapper"},p={id:"message-container",class:"chat-wrapper-inner"},h={class:"message-wrapper"},f={class:"type-message-wrapper"},v=l((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-brand-telegram",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n._)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,n._)("path",{d:"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"})],-1))),w=[v];function _(e,t,s,r,a,l){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",c,[(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.rooms,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:`rooms-${t}`,class:(0,i.C_)(["no-select",{active:e===s.roomSelected}]),onClick:t=>l.switchRoom(e)},(0,i.zw)(e),11,m)))),128))])]),(0,n._)("div",d,[(0,n._)("div",g,[(0,n._)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.messages,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:`message-${t}`,class:(0,i.C_)(["message",{mine:e.username===s.username}])},[(0,n._)("div",h,[(0,n._)("b",null,(0,i.zw)(e.username),1),(0,n.Uk)(" "+(0,i.zw)(e.sendAt.toLocaleString())+" ",1),(0,n._)("div",{class:(0,i.C_)(["message-content",{mine:e.username===s.username}])},(0,i.zw)(e.message),3)])],2)))),128))])]),(0,n._)("div",f,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.inputMessage=e),ref:"inputMessage",type:"text",placeholder:"Say hello !",onKeydown:t[1]||(t[1]=(0,o.D2)((0,o.iM)(((...e)=>l.sendMessage&&l.sendMessage(...e)),["prevent"]),["enter"]))},null,544),[[o.nr,a.inputMessage]]),(0,n._)("button",{onClick:t[2]||(t[2]=(0,o.iM)(((...e)=>l.sendMessage&&l.sendMessage(...e)),["prevent"]))},w)])])])}s(7658);var y=s(6265),b=s.n(y);const k="/api/chat";class S{static getMessages(e){return new Promise(((t,s)=>{try{b().get(k+"/messages/"+e).then((e=>{const s=e.data;t({status:e.status,messages:s.map((e=>({...e,sendAt:new Date(e.sendAt)})))})}))}catch(o){s(o)}}))}static sendMessage(e,t,s){return b().post(k+"/message",{username:e,message:t,room:s})}static deleteMessage(e){return b()["delete"](`${k}/message/${e}`)}}var M=S,C=s(2066),D={name:"ChatApp",data(){return{messages:[],error:null,inputMessage:null,socket:(0,C.ZP)(location.origin)}},props:{roomSelected:{type:String,default:null},rooms:{type:Array,default:()=>[]},username:{type:String,default:null}},mounted(){this.switchRoom(),this.socket.on("MESSAGE",(e=>{this.messages.push(e),this.scrollToBottom("message-container")}))},methods:{switchRoom(e=null){e&&(this.messages=[],this.$emit("switch-room",e)),this.$nextTick((()=>{M.getMessages(this.roomSelected).then((e=>{200===e.status?(this.messages=e.messages,this.$nextTick((()=>{this.scrollToBottom("message-container")}))):this.error=e.message})),this.socket.emit("JOIN_ROOM",{username:this.username,room:this.roomSelected}),this.$refs.inputMessage.focus()}))},sendMessage(){const e={username:this.username,message:this.inputMessage,sendAt:new Date,room:this.roomSelected};this.socket.emit("SEND_MESSAGE",e),M.sendMessage(this.username,this.inputMessage,this.roomSelected),this.scrollToBottom("message-container"),this.inputMessage=null,this.$refs.inputMessage.focus()},scrollToBottom(e){const t=document.getElementById(e);t.scrollTop=t.scrollHeight}}},O=s(89);const j=(0,O.Z)(D,[["render",_],["__scopeId","data-v-faa874d6"]]);var A=j;const T=e=>((0,n.dD)("data-v-641cb7e0"),e=e(),(0,n.Cn)(),e),$={class:"chocket"},x={class:"login"},P=T((()=>(0,n._)("label",{for:"username"},"Username",-1))),E=T((()=>(0,n._)("br",null,null,-1))),z=T((()=>(0,n._)("br",null,null,-1))),B=T((()=>(0,n._)("label",{for:"rooms"},"Room",-1))),H=T((()=>(0,n._)("br",null,null,-1))),R=T((()=>(0,n._)("option",{value:null},"--Select a room--",-1))),I=["value"],U={class:"button-container"};function K(e,t,s,r,a,l){return(0,n.wg)(),(0,n.iD)("div",$,[(0,n._)("div",x,[(0,n._)("div",null,[P,E,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),id:"username",type:"text",placeholder:"John Do"},null,512),[[o.nr,a.username]])]),z,(0,n._)("div",null,[B,H,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.roomSelected=e),id:"rooms",name:"rooms"},[R,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.rooms,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:`rooms-${t}`,value:e},(0,i.zw)(e),9,I)))),128))],512),[[o.bM,a.roomSelected]])]),(0,n._)("div",U,[(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>l.join&&l.join(...e))}," Join ")])])])}var Y={name:"LoginChatApp",data(){return{roomSelected:null,username:null}},props:{rooms:{type:Array,default:()=>[]}},methods:{join(){this.username&&this.rooms.includes(this.roomSelected)&&this.$emit("change-page",{page:1,room:this.roomSelected,username:this.username})}}};const Z=(0,O.Z)(Y,[["render",K],["__scopeId","data-v-641cb7e0"]]);var q=Z,G={name:"App",components:{ChatApp:A,LoginChatApp:q},data(){return{page:0,rooms:["General","Questions"],roomSelected:null,username:null}},methods:{changePage(e){this.page=e.page,this.roomSelected=e.room,this.username=e.username}}};const J=(0,O.Z)(G,[["render",a],["__scopeId","data-v-e4565260"]]);var L=J;(0,o.ri)(L).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,r){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],r=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,a=o[0],i=o[1],l=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(l)var c=l(s)}for(t&&t(o);u<a.length;u++)r=a[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(260)}));o=s.O(o)})();
//# sourceMappingURL=app.484b312f.js.map