(function(){"use strict";var e={5708:function(e,n,t){var s=t(9242),o=t(3396);const r={key:0};function a(e,n,t,s,a,l){const i=(0,o.up)("login-chat-app"),u=(0,o.up)("chat-app");return(0,o.wg)(),(0,o.iD)(o.HY,null,[0===a.page?((0,o.wg)(),(0,o.iD)("h1",r,"chocket.io")):(0,o.kq)("",!0),0===a.page?((0,o.wg)(),(0,o.j4)(i,{key:1,rooms:a.rooms,"room-selected":a.roomSelected,onChangePage:n[0]||(n[0]=e=>l.changePage(e))},null,8,["rooms","room-selected"])):(0,o.kq)("",!0),1===a.page?((0,o.wg)(),(0,o.j4)(u,{key:2,rooms:a.rooms,username:a.username,"room-selected":a.roomSelected},null,8,["rooms","username","room-selected"])):(0,o.kq)("",!0)],64)}var l=t(7139);const i=e=>((0,o.dD)("data-v-f9031af2"),e=e(),(0,o.Cn)(),e),u={class:"chocket"},c={class:"room-list"},m={class:"chat"},d={class:"chat-wrapper"},g={id:"message-container",class:"chat-wrapper-inner"},p={class:"message-wrapper"},h={class:"type-message-wrapper"},f=i((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-brand-telegram",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o._)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,o._)("path",{d:"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"})],-1))),v=[f];function w(e,n,t,r,a,i){return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",c,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rooms,((e,n)=>((0,o.wg)(),(0,o.iD)("li",{key:`rooms-${n}`,class:(0,l.C_)(["no-select",{active:e===t.roomSelected}])},(0,l.zw)(e),3)))),128))])]),(0,o._)("div",m,[(0,o._)("div",d,[(0,o._)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.messages,((e,n)=>((0,o.wg)(),(0,o.iD)("div",{key:`message-${n}`,class:(0,l.C_)(["message",{mine:e.username===t.username}])},[(0,o._)("div",p,[(0,o._)("b",null,(0,l.zw)(e.username),1),(0,o.Uk)(" "+(0,l.zw)(e.sendAt.toLocaleString())+" ",1),(0,o._)("div",{class:(0,l.C_)(["message-content",{mine:e.username===t.username}])},(0,l.zw)(e.message),3)])],2)))),128))])]),(0,o._)("div",h,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>a.inputMessage=e),type:"text",placeholder:"Say hello !",onKeydown:n[1]||(n[1]=(0,s.D2)(((...e)=>i.sendMessage&&i.sendMessage(...e)),["enter"]))},null,544),[[s.nr,a.inputMessage]]),(0,o._)("button",{onClick:n[2]||(n[2]=(...e)=>i.sendMessage&&i.sendMessage(...e))},v)])])])}t(7658);var _=t(6265),y=t.n(_);const b="/api/chat";class k{static getMessages(){return new Promise(((e,n)=>{try{y().get(b+"/messages").then((n=>{const t=n.data;e({status:n.status,messages:t.map((e=>({...e,sendAt:new Date(e.sendAt)})))})}))}catch(t){n(t)}}))}static sendMessage(e,n){return y().post(b+"/message",{username:e,message:n})}static deleteMessage(e){return y()["delete"](`${b}/message/${e}`)}}var S=k,M=t(2066),D={name:"ChatApp",data(){return{messages:[],error:null,inputMessage:null,socket:(0,M.ZP)(location.origin)}},props:{roomSelected:{type:String,default:null},rooms:{type:Array,default:()=>[]},username:{type:String,default:null}},mounted(){S.getMessages().then((e=>{200===e.status?(this.messages=e.messages,this.$nextTick((()=>{this.scrollToBottom("message-container")}))):this.error=e.message})),this.socket.on("MESSAGE",(e=>{this.messages.push(e),this.scrollToBottom("message-container")}))},methods:{sendMessage(){const e={username:this.username,message:this.inputMessage,sendAt:new Date};this.socket.emit("SEND_MESSAGE",e),S.sendMessage(this.username,this.inputMessage),this.scrollToBottom("message-container"),this.inputMessage=null},scrollToBottom(e){const n=document.getElementById(e);n.scrollTop=n.scrollHeight}}},C=t(89);const j=(0,C.Z)(D,[["render",w],["__scopeId","data-v-f9031af2"]]);var A=j;const O=e=>((0,o.dD)("data-v-641cb7e0"),e=e(),(0,o.Cn)(),e),T={class:"chocket"},x={class:"login"},P=O((()=>(0,o._)("label",{for:"username"},"Username",-1))),E=O((()=>(0,o._)("br",null,null,-1))),$=O((()=>(0,o._)("br",null,null,-1))),z=O((()=>(0,o._)("label",{for:"rooms"},"Room",-1))),B=O((()=>(0,o._)("br",null,null,-1))),H=O((()=>(0,o._)("option",{value:null},"--Select a room--",-1))),U=["value"],I={class:"button-container"};function K(e,n,t,r,a,i){return(0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("div",x,[(0,o._)("div",null,[P,E,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>a.username=e),id:"username",type:"text",placeholder:"John Do"},null,512),[[s.nr,a.username]])]),$,(0,o._)("div",null,[z,B,(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>a.roomSelected=e),id:"rooms",name:"rooms"},[H,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rooms,((e,n)=>((0,o.wg)(),(0,o.iD)("option",{key:`rooms-${n}`,value:e},(0,l.zw)(e),9,U)))),128))],512),[[s.bM,a.roomSelected]])]),(0,o._)("div",I,[(0,o._)("button",{onClick:n[2]||(n[2]=(...e)=>i.join&&i.join(...e))}," Join ")])])])}var Y={name:"LoginChatApp",data(){return{roomSelected:null,username:null}},props:{rooms:{type:Array,default:()=>[]}},methods:{join(){this.username&&this.rooms.includes(this.roomSelected)&&this.$emit("change-page",{page:1,room:this.roomSelected,username:this.username})}}};const Z=(0,C.Z)(Y,[["render",K],["__scopeId","data-v-641cb7e0"]]);var q=Z,G={name:"App",components:{ChatApp:A,LoginChatApp:q},data(){return{page:0,rooms:["General"],roomSelected:null,username:null}},methods:{changePage(e){this.page=e.page,this.roomSelected=e.room,this.username=e.username}}};const L=(0,C.Z)(G,[["render",a],["__scopeId","data-v-4494d81b"]]);var V=L;(0,s.ri)(V).mount("#app")}},n={};function t(s){var o=n[s];if(void 0!==o)return o.exports;var r=n[s]={exports:{}};return e[s](r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,s,o,r){if(!s){var a=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],r=e[c][2];for(var l=!0,i=0;i<s.length;i++)(!1&r||a>=r)&&Object.keys(t.O).every((function(e){return t.O[e](s[i])}))?s.splice(i--,1):(l=!1,r<a&&(a=r));if(l){e.splice(c--,1);var u=o();void 0!==u&&(n=u)}}return n}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,o,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,s){var o,r,a=s[0],l=s[1],i=s[2],u=0;if(a.some((function(n){return 0!==e[n]}))){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(i)var c=i(t)}for(n&&n(s);u<a.length;u++)r=a[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(n.bind(null,0)),s.push=n.bind(null,s.push.bind(s))}();var s=t.O(void 0,[998],(function(){return t(5708)}));s=t.O(s)})();
//# sourceMappingURL=app.0064a0d2.js.map